% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/save_plot_with_metadata.R
\name{save_plot_with_metadata}
\alias{save_plot_with_metadata}
\title{Universal Plot Saving Function with Metadata}
\usage{
save_plot_with_metadata(
  plot_name,
  plot = NULL,
  save_dir = getOption("figure_save_path", "./"),
  filetype = getOption("gecko.utils_default_filetype", "png"),
  prefix = TRUE,
  timestamp_format = "\%y\%m\%d",
  preserve_latest = FALSE,
  latest_subdir = "latest",
  archive_subdir = "archive",
  use_device = FALSE,
  ...
)
}
\arguments{
\item{plot_name}{A string for the plot's name, which will be part of the filename.}

\item{plot}{A ggplot2 plot object. If not provided, defaults to the last ggplot created (\code{ggplot2::last_plot()}).}

\item{save_dir}{Base directory for saving the plot. Uses the project-wide default path if set with \code{set_figure_save_path()}.}

\item{filetype}{The output file format. Supports \code{"png"}, \code{"pdf"}, \code{"jpeg"}, \code{"tiff"}, etc. For base R plots, use \code{"png"} or \code{"pdf"}.}

\item{prefix}{A logical or string indicating whether the script name should be included as a prefix in the filename. If a string is provided, it will be used as a custom prefix.}

\item{timestamp_format}{The date format used in filenames (default: \code{"\%y\%m\%d"}).}

\item{preserve_latest}{A logical indicating whether only the latest file version should be stored
with a consistent filename, without a date suffix.}

\item{latest_subdir}{The subdirectory where the latest version of the plot is stored when \code{preserve_latest = TRUE}.}

\item{archive_subdir}{The subdirectory where older versions of the plot are archived when \code{preserve_latest = TRUE}.}

\item{use_device}{Logical. If \code{TRUE}, the function will save from the active graphics device (useful for base R plots).}

\item{...}{Additional arguments for \code{ggsave()} (ggplot2) or \code{png()} (base R), such as width, height, etc.}
}
\value{
Returns the full path of the saved plot.
}
\description{
A flexible function to save plots (ggplot2, base R, etc.) with a customizable filename.
The filename includes metadata such as the script name, plot name, and current date.
It also supports automatic versioning by maintaining the latest plot version while archiving older versions.
}
\examples{
library(ggplot2)
library(gecko.utils)
# Example 1: Save a ggplot2 plot with metadata (scriptname, plot_name, date) in the filename
p <- ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point()
save_plot_with_metadata(plot = p, plot_name = "mtcars_scatter", save_dir = "figures")

# Example 2:  Keep only the latest version, archiving older versions automatically
# (useful for workflows with direct linked figures)
# The latest version will be stored in the "latest" subdirectory, if there is
# an older file with the same name, the old file will be archived.
save_plot_with_metadata("mtcars_scatter", save_dir = "figures", preserve_latest = TRUE)

# Example 3: Save a plot with custom dimensions
save_plot_with_metadata("mtcars_scatter", save_dir = "figures",
    width = 15, height = 10, units = "cm")

# Example 4: Save a base R plot with a custom filename
plot(1:10, 1:10)
save_plot_with_metadata("base_r_plot", use_device = TRUE)

}
